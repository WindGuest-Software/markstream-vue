var e=(e,n,l)=>new Promise((t,a)=>{var o=e=>{try{i(l.next(e))}catch(n){a(n)}},r=e=>{try{i(l.throw(e))}catch(n){a(n)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,r);i((l=l.apply(e,n)).next())});import{defineComponent as n,ref as l,watch as t,onMounted as a,onBeforeUnmount as o,createElementBlock as r,openBlock as i,withDirectives as u,createBlock as s,createCommentVNode as d,createElementVNode as c,vShow as v,Transition as p,withCtx as f,renderSlot as m}from"vue";import{a as h,d as _,e as y,f as w,W as g,_ as x}from"./exports.js";const E={class:"math-inline__loading",role:"status","aria-live":"polite"},R=/* @__PURE__ */x(/* @__PURE__ */n({__name:"MathInlineNode",props:{node:{}},setup(n){const x=n,R=l(null),T=l(null);let b=!1,k=0,I=!1,C=null;const L=l(!0),M=h();let O=null;function $(){return e(this,null,function*(){if(!T.value||I)return;if(!x.node.content)return L.value=!1,T.value.textContent=x.node.raw,void(b=!0);C&&(C.abort(),C=null);const n=++k,l=new AbortController;if(C=l,!b)try{!O&&R.value&&(O=M(R.value)),yield null==O?void 0:O.whenVisible}catch(a){}const t="$$"===x.node.markup;_(x.node.content,t,{timeout:1500,waitTimeout:0,maxRetries:0,signal:l.signal}).then(e=>{I||n!==k||T.value&&(T.value.innerHTML=e,L.value=!1,b=!0)}).catch(l=>e(null,null,function*(){if(I||n!==k)return;if(!T.value)return;const e=(null==l?void 0:l.code)||(null==l?void 0:l.name),t="KATEX_DISABLED"===e;if("WORKER_INIT_ERROR"===e||(null==l?void 0:l.fallbackToRenderer)||e===g||"WORKER_TIMEOUT"===e){const e=yield y();if(e){try{const n="$$"===x.node.markup,l=e.renderToString(x.node.content,{throwOnError:x.node.loading,displayMode:n});L.value=!1,T.value.innerHTML=l,b=!0,w(x.node.content,n,l)}catch(a){}return}}if(t)return L.value=!1,void(T.value.textContent=x.node.raw);b||(L.value=!t),x.node.loading?t&&(T.value.textContent=x.node.raw):(L.value=!1,T.value.textContent=x.node.raw)}))})}return t(()=>x.node.content,()=>{$()}),a(()=>{$()}),o(()=>{var e;I=!0,C&&(C.abort(),C=null),null==(e=null==O?void 0:O.destroy)||e.call(O),O=null}),(e,n)=>(i(),r("span",{ref_key:"containerEl",ref:R,class:"math-inline-wrapper"},[u(c("span",{ref_key:"mathElement",ref:T,class:"math-inline"},null,512),[[v,!L.value]]),L.value?(i(),s(p,{key:0,name:"table-node-fade"},{default:f(()=>[c("span",E,[m(e.$slots,"loading",{isLoading:L.value},()=>[n[0]||(n[0]=c("span",{class:"math-inline__spinner animate-spin","aria-hidden":"true"},null,-1)),n[1]||(n[1]=c("span",{class:"sr-only"},"Loading",-1))],!0)])]),_:3})):d("",!0)],512))}}),[["__scopeId","data-v-32b58f6e"]]);R.install=e=>{e.component(R.__name,R)};export{R as default};
