import e from"katex";import"katex/dist/contrib/mhchem";let r=!1;globalThis.addEventListener("message",t=>{var o,s,n,a;const d=t.data||{};if("init"===d.type){r=!!d.debug;try{r&&console.debug("[katexRenderer.worker] debug enabled")}catch(g){}return}const l=null!=(o=d.id)?o:"",i=null!=(s=d.content)?s:"",c=null==(n=d.displayMode)||n;try{r&&console.debug("[katexRenderer.worker] render start",{id:l,displayMode:c,content:i});const t={id:l,html:e.renderToString(i,{throwOnError:!0,displayMode:c,output:"html",strict:"ignore"}),content:i,displayMode:c};try{globalThis.postMessage(t),r&&console.debug("[katexRenderer.worker] render success",{id:l})}catch(u){console.error("[katexRenderer.worker] failed to postMessage result",u)}}catch(h){const e={id:l,error:String(null!=(a=null==h?void 0:h.message)?a:h),content:i,displayMode:c};try{globalThis.postMessage(e)}catch(u){console.error("[katexRenderer.worker] failed to postMessage error",u)}}}),globalThis.addEventListener("error",e=>{var r;console.error("[katexRenderer.worker] uncaught error",e.message,e.error);try{globalThis.postMessage({id:"__worker_uncaught__",error:String(null!=(r=e.message)?r:e.error),content:"",displayMode:!0})}catch(t){}});
